---
import { SUPPORT_MAILTO } from "../../utils/constants";

/**
 * FAQ Section
 * 
 * Refined editorial design with serif headlines,
 * soft borders, and frosted glass transparency.
 */

const faqs = [
    {
        question: "How does Duet Mail protect my email data?",
        answer: "Your security is our top priority. We use OAuth 2.0 for secure authentication, process emails in Gmail's secure environment, and never store your email content. All processing happens in real-time through Gmail's API, and we undergo Google's annual CASA security assessment to maintain the highest security standards.",
    },
    {
        question: "How does the email summary feature work?",
        answer: "Duet Mail uses advanced AI to analyze your email threads and generate a concise overview highlighting the key points, decisions, and action items. This helps you quickly understand the context without reading the entire thread.",
    },
    {
        question: "What permissions does Duet Mail need?",
        answer: "Duet Mail requires access to your emails to provide summaries, extract action items, generate content, and send your emails. We only request permissions we absolutely need. You can review and revoke these permissions at any time in your Google Account settings.",
    },
    {
        question: "What's included in the free trial?",
        answer: "The 14-day free trial includes full free tool access to all Pro features: unlimited email summaries, action item extraction, AI email writer (generating emails and drafts without any limits), and custom email templates. Just sign in with Google to start saving time on email management.",
    },
    {
        question: "Can I use Duet Mail with other email providers?",
        answer: "Currently, Duet Mail works exclusively with Gmail and Google Workspace accounts. We will be adding support for other email providers, including Outlook and Apple Mail in the future.",
    },
];
---

<section id="faq" class="faq" aria-label="Frequently asked questions">
    <div class="faq__container">
        <header class="faq__header">
            <div class="faq__header-top">
                <span class="faq__marker">FAQ</span>
            </div>
            <h2 class="faq__title">
                <span class="faq__title-main">Common questions, </span><span class="faq__title-accent">answered</span>
            </h2>
        </header>

        <div class="faq__content">
            <div class="faq__sidebar">
                <div class="faq__sidebar-contact">
                    <span class="faq__sidebar-bg" aria-hidden="true">?</span>
                    <div class="faq__sidebar-content">
                        <span class="faq__sidebar-label">CONTACT</span>
                        <p class="faq__sidebar-heading">Still have <br/>questions?</p>
                        <a href={SUPPORT_MAILTO} class="faq__sidebar-link">Get in touch →</a>
                    </div>
                </div>
            </div>

            <div class="faq__list">
                {faqs.map((item, index) => (
                    <details class="faq__item" data-index={index}>
                        <summary class="faq__summary">
                            <div class="faq__summary-left">
                                <span class="faq__number">{String(index + 1).padStart(2, '0')}/</span>
                                <h3 class="faq__question">{item.question}</h3>
                            </div>
                            <span class="faq__toggle" aria-hidden="true">
                                <span class="faq__toggle-open">[+]</span>
                                <span class="faq__toggle-close">[−]</span>
                            </span>
                        </summary>
                        <div class="faq__answer">
                            <div class="faq__answer-inner">
                                <span class="faq__answer-marker" aria-hidden="true">→</span>
                                <p>{item.answer}</p>
                            </div>
                        </div>
                    </details>
                ))}
            </div>
        </div>

        <footer class="faq__footer">
            <div class="faq__footer-left">
                <span>DUET MAIL</span>
                <span class="faq__footer-dot">●</span>
                <span>FAQ</span>
            </div>
        </footer>
    </div>
</section>

<style>
    /* ═══════════════════════════════════════════════════════════════
       FAQ Section
       Refined editorial design with serif headlines and clean borders
    ═══════════════════════════════════════════════════════════════ */

    .faq {
        position: relative;
        padding: 80px 24px 140px;
    }

    .faq__container {
        max-width: 1100px;
        margin: 0 auto;
        border: 1px solid var(--duet-border-editorial);
        border-radius: 2px;
    }

    :global(html[data-theme="light"]) .faq__container {
        background: rgba(250, 250, 249, 0.75);
        backdrop-filter: blur(20px) saturate(1.3);
        -webkit-backdrop-filter: blur(20px) saturate(1.3);
        box-shadow: 
            0 4px 24px rgba(0, 0, 0, 0.06),
            inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    :global(html:not([data-theme="light"])) .faq__container {
        background: rgba(20, 20, 24, 0.7);
        backdrop-filter: blur(24px) saturate(1.2);
        -webkit-backdrop-filter: blur(24px) saturate(1.2);
        box-shadow: 
            0 4px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    /* ─── Header ─── */
    .faq__header {
        padding: 48px 48px 40px;
        border-bottom: 1px solid var(--duet-border-editorial);
    }

    @media (max-width: 768px) {
        .faq__header {
            padding: 32px 24px 28px;
        }
    }

    .faq__header-top {
        margin-bottom: 16px;
    }

    .faq__marker {
        display: inline-block;
        font-family: var(--font-sans);
        font-size: 13px;
        font-weight: 500;
        letter-spacing: 0.02em;
        padding: 6px 14px;
        border-radius: 9999px;
        background: var(--badge-bg);
        border: 1px solid var(--badge-border);
        color: var(--badge-text);
    }

    .faq__title {
        margin: 0;
        font-family: var(--font-serif);
        font-size: clamp(32px, 5vw, 42px);
        font-weight: 500;
        line-height: 1.15;
        letter-spacing: -0.02em;
        color: var(--prose-heading);
    }

    .faq__title-main {
        display: inline;
    }

    .faq__title-accent {
        display: inline;
        background: linear-gradient(135deg, #a78bfa 0%, #74c2ff 100%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* ─── Content Layout ─── */
    .faq__content {
        display: grid;
        grid-template-columns: 200px 1fr;
    }

    @media (max-width: 900px) {
        .faq__content {
            grid-template-columns: 1fr;
        }
    }

    /* ─── Sidebar ─── */
    .faq__sidebar {
        padding: 32px;
        border-right: 1px solid var(--duet-border-editorial);
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    @media (max-width: 900px) {
        .faq__sidebar {
            border-right: none;
            border-bottom: 1px solid var(--duet-border-editorial);
            padding: 24px;
        }
    }

    .faq__sidebar-contact {
        position: relative;
    }

    .faq__sidebar-bg {
        position: absolute;
        top: -20px;
        right: -15px;
        font-family: var(--font-serif);
        font-size: 140px;
        font-weight: 500;
        line-height: 1;
        pointer-events: none;
        user-select: none;
        overflow: hidden;
    }

    :global(html[data-theme="light"]) .faq__sidebar-bg {
        color: #6366f1;
        opacity: 0.07;
    }

    :global(html:not([data-theme="light"])) .faq__sidebar-bg {
        color: #a5b4fc;
        opacity: 0.06;
    }

    .faq__sidebar-content {
        position: relative;
        z-index: 1;
    }

    .faq__sidebar-label {
        display: block;
        font-family: var(--font-sans);
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 10px;
    }

    :global(html[data-theme="light"]) .faq__sidebar-label {
        color: #6366f1;
    }

    :global(html:not([data-theme="light"])) .faq__sidebar-label {
        color: #a5b4fc;
    }

    .faq__sidebar-heading {
        margin: 0 0 14px;
        font-family: var(--font-serif);
        font-size: 18px;
        font-weight: 500;
        line-height: 1.35;
        letter-spacing: -0.01em;
        color: var(--prose-heading);
    }

    .faq__sidebar-link {
        display: inline-block;
        font-family: var(--font-sans);
        font-size: 13px;
        font-weight: 500;
        letter-spacing: 0;
        text-decoration: none;
        padding: 8px 14px;
        border: 1px solid currentColor;
        border-radius: 6px;
        transition: all 200ms ease;
        white-space: nowrap;
    }

    :global(html[data-theme="light"]) .faq__sidebar-link {
        color: #6366f1;
    }

    :global(html[data-theme="light"]) .faq__sidebar-link:hover {
        background: #6366f1;
        color: white;
    }

    :global(html:not([data-theme="light"])) .faq__sidebar-link {
        color: #a5b4fc;
    }

    :global(html:not([data-theme="light"])) .faq__sidebar-link:hover {
        background: #a5b4fc;
        color: #0f0f12;
    }

    @media (max-width: 900px) {
        .faq__sidebar-contact {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .faq__sidebar-bg {
            position: static;
            font-size: 64px;
            flex-shrink: 0;
        }

        .faq__sidebar-heading br {
            display: none;
        }
    }

    /* ─── FAQ List ─── */
    .faq__list {
        display: flex;
        flex-direction: column;
    }

    .faq__item {
        border-bottom: 1px solid var(--duet-border-editorial);
    }

    .faq__item:last-child {
        border-bottom: none;
    }

    .faq__summary {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 16px;
        padding: 24px 32px;
        cursor: pointer;
        list-style: none;
        transition: background-color 150ms ease;
    }

    .faq__summary::-webkit-details-marker {
        display: none;
    }

    :global(html[data-theme="light"]) .faq__summary:hover {
        background: rgba(0, 0, 0, 0.02);
    }

    :global(html:not([data-theme="light"])) .faq__summary:hover {
        background: rgba(255, 255, 255, 0.02);
    }

    .faq__summary:focus-visible {
        outline: 2px solid var(--duet-accent);
        outline-offset: 2px;
    }

    @media (max-width: 768px) {
        .faq__summary {
            padding: 20px 24px;
        }
    }

    .faq__summary-left {
        display: flex;
        align-items: flex-start;
        gap: 16px;
    }

    .faq__number {
        flex-shrink: 0;
        font-family: var(--font-sans);
        font-size: 12px;
        font-weight: 600;
        color: var(--prose-text);
        opacity: 0.4;
        padding-top: 3px;
    }

    .faq__item[open] .faq__number {
        opacity: 0.8;
    }

    :global(html[data-theme="light"]) .faq__item[open] .faq__number {
        color: #6366f1;
        opacity: 1;
    }

    :global(html:not([data-theme="light"])) .faq__item[open] .faq__number {
        color: #a5b4fc;
        opacity: 1;
    }

    .faq__question {
        margin: 0;
        font-family: var(--font-sans);
        font-size: 15px;
        font-weight: 500;
        line-height: 1.5;
        letter-spacing: -0.01em;
        color: var(--prose-heading);
    }

    .faq__toggle {
        flex-shrink: 0;
        font-family: var(--font-sans);
        font-size: 14px;
        font-weight: 500;
        color: var(--prose-heading);
        opacity: 0.4;
    }

    .faq__item[open] .faq__toggle {
        opacity: 1;
    }

    .faq__toggle-close {
        display: none;
    }

    .faq__item[open] .faq__toggle-open {
        display: none;
    }

    .faq__item[open] .faq__toggle-close {
        display: inline;
    }

    /* ─── Answer ─── */
    .faq__answer {
        overflow: hidden;
    }

    .faq__answer-inner {
        display: flex;
        gap: 16px;
        padding: 0 32px 24px;
        animation: faq-reveal 300ms ease;
    }

    @media (max-width: 768px) {
        .faq__answer-inner {
            padding: 0 24px 20px;
        }
    }

    @keyframes faq-reveal {
        from {
            opacity: 0;
            transform: translateX(-8px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .faq__answer-marker {
        flex-shrink: 0;
        font-family: var(--font-sans);
        font-size: 13px;
        font-weight: 500;
    }

    :global(html[data-theme="light"]) .faq__answer-marker {
        color: #6366f1;
    }

    :global(html:not([data-theme="light"])) .faq__answer-marker {
        color: #a5b4fc;
    }

    .faq__answer p {
        margin: 0;
        font-family: var(--font-sans);
        font-size: 14px;
        font-weight: 400;
        line-height: 1.7;
        color: var(--prose-text);
    }

    /* ─── Footer ─── */
    .faq__footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 32px;
        border-top: 1px solid var(--duet-border-editorial);
        font-family: var(--font-sans);
        font-size: 11px;
        font-weight: 500;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        color: var(--prose-text);
        opacity: 0.6;
    }

    @media (max-width: 768px) {
        .faq__footer {
            padding: 16px 24px;
            flex-direction: column;
            gap: 8px;
        }
    }

    .faq__footer-left {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .faq__footer-dot {
        font-size: 6px;
    }
</style>
