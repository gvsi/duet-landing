@import "@fontsource-variable/domine";
@import "@fontsource-variable/manrope";

@import "tailwindcss";

@layer base {
  :root {
    overflow-x: hidden;
  }

  body {
    overflow-x: hidden;
  }

  :root {
    --duet-bg: #08081a;
    --duet-fg: #ffffff;
    --duet-muted: #a8a8b3;
    /* Refined muted - slightly warmer for editorial feel */
    --duet-border: rgba(255, 255, 255, 0.06);
    --duet-border-editorial: rgba(255, 255, 255, 0.10);
    --duet-accent: #4530ea;
    --duet-accent-2: #74c2ff;

    /* Semantics - Component Specific (Dark) */
    --badge-bg: rgba(255, 255, 255, 0.08);
    --badge-text: rgba(255, 255, 255, 0.9);
    --badge-border: rgba(255, 255, 255, 0.1);

    --mockup-window-bg: linear-gradient(180deg, rgba(28, 28, 32, 0.95) 0%, rgba(20, 20, 24, 0.98) 100%);
    --mockup-border: rgba(255, 255, 255, 0.08);
    --mockup-shadow: 0 40px 80px rgba(0, 0, 0, 0.4), 0 16px 32px rgba(0, 0, 0, 0.3);

    --email-bg-1: rgba(59, 130, 246, 0.04);
    --email-border: rgba(255, 255, 255, 0.04);

    /* Editorial Typography */
    --font-serif: "Domine Variable", ui-serif, Georgia, Cambria, "Times New Roman", serif;
    --font-sans: "Manrope Variable", ui-sans-serif, system-ui, -apple-system, sans-serif;

    /* Default (Dark) Hero Background */
    --hero-bg-image: none;
    --hero-bg-size: auto;
    --hero-bg-repeat: no-repeat;

    /* Semantic Colors (Dark) - Refined for editorial elegance */
    --prose-text: rgba(200, 200, 210, 0.92);
    --prose-text-secondary: rgba(160, 160, 175, 0.85);
    --prose-heading: rgba(255, 255, 255, 0.96);
    --prose-link: #8cb4ff;
    --prose-link-hover: #ffffff;

    /* Editorial Dividers */
    --divider-ornament: rgba(255, 255, 255, 0.15);

    /* No halo needed in dark mode */
    --hero-text-shadow: none;
    --hero-meta-shadow: none;

    --nav-bg: rgba(0, 0, 0, 0.1);
    --nav-border: rgba(255, 255, 255, 0.1);
    --nav-text: rgba(255, 255, 255, 0.72);
    --nav-text-hover: rgba(255, 255, 255, 0.95);
    --nav-cta-bg: rgba(255, 255, 255, 0.06);
    --nav-cta-border: rgba(255, 255, 255, 0.12);
    --nav-cta-text: rgba(255, 255, 255, 0.92);
    --nav-mobile-bg: rgba(0, 0, 0, 0.863);

    /* Code Blocks (Dark) */
    --code-bg: rgba(255, 255, 255, 0.05);
    --code-text: rgba(255, 255, 255, 0.88);
    --code-border: rgba(255, 255, 255, 0.08);
    --pre-bg: rgba(0, 0, 0, 0.4);
  }

  html[data-theme="light"] {
    --duet-bg: #fafafa;
    /* Slightly warm off-white for refined editorial feel */
    --duet-fg: #1a1a1f;
    --duet-muted: #6b6b76;
    /* Warm gray for elegant secondary text */
    --duet-border: rgba(0, 0, 0, 0.06);
    --duet-border-editorial: rgba(0, 0, 0, 0.10);
    --duet-accent: #3730a3;
    --duet-accent-2: #4f46e5;

    /* Light Hero Background - Mobile first (smallest image) */
    --hero-bg-image: url("/hero-bg-light-sm.webp");
    --hero-bg-repeat: repeat-y;
    --hero-bg-size: 100%;

    /* Semantic Colors (Light) - Refined for editorial legibility */
    --prose-text: #3d3d44;
    --prose-text-secondary: #6b6b76;
    --prose-heading: #1a1a1f;
    --prose-link: #4f46e5;
    --prose-link-hover: #1a1a1f;

    /* Editorial Dividers */
    --divider-ornament: rgba(0, 0, 0, 0.12);

    /* Adaptive text halo for variable backgrounds */
    --hero-text-shadow:
      0 0 12px rgba(255, 255, 255, 0.95),
      0 0 24px rgba(255, 255, 255, 0.7),
      0 0 48px rgba(255, 255, 255, 0.4);
    --hero-meta-shadow:
      0 0 8px rgba(255, 255, 255, 0.9),
      0 0 16px rgba(255, 255, 255, 0.6);
    --nav-bg: rgba(255, 255, 255, 0.7);
    --nav-border: rgba(0, 0, 0, 0.06);
    --nav-text: #4b5563;
    --nav-text-hover: #111827;
    --nav-cta-bg: rgba(0, 0, 0, 0.04);
    --nav-cta-border: rgba(0, 0, 0, 0.1);
    --nav-cta-text: #111827;
    --nav-mobile-bg: rgba(255, 255, 255, 0.95);

    /* Semantics - Component Specific (Light) */
    --badge-bg: rgba(255, 255, 255, 0.6);
    --badge-text: #4b5563;
    --badge-border: #e4e4e7;

    --mockup-window-bg: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 245, 250, 0.98) 100%);
    --mockup-border: rgba(0, 0, 0, 0.06);
    --mockup-shadow: 0 40px 80px rgba(0, 0, 0, 0.12), 0 16px 32px rgba(0, 0, 0, 0.08);

    --email-bg-1: rgba(59, 130, 246, 0.08);
    --email-border: rgba(0, 0, 0, 0.05);

    /* Prose Code Overrides */
    --code-bg: rgba(0, 0, 0, 0.04);
    --code-text: #1a1a1f;
    --code-border: rgba(0, 0, 0, 0.08);
    --pre-bg: #f0f0f2;
  }

  /* Responsive hero background for light mode - tablet */
  @media (min-width: 768px) {
    html[data-theme="light"] {
      --hero-bg-image: url("/hero-bg-light-md.webp");
    }
  }

  /* Responsive hero background for light mode - desktop */
  @media (min-width: 1280px) {
    html[data-theme="light"] {
      --hero-bg-image: url("/hero-bg-light-lg.webp");
    }
  }

  html {
    color-scheme: light;
    background: var(--duet-bg);
  }

  html:not([data-theme="light"]) {
    color-scheme: dark;
  }

  @media (min-width: 768px) {
    html {
      zoom: 1.1;
    }

    /* Fallback for Firefox */
    @supports not (zoom: 1) {
      html {
        transform: scale(1.1);
        transform-origin: top left;
        width: 90.90909%;
        height: 90.90909%;
      }
    }
  }

  body {
    margin: 0;
    min-height: 100dvh;
    background: var(--duet-bg);
    color: var(--duet-fg);
    font-family: "Manrope Variable", ui-sans-serif, system-ui, -apple-system,
      BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji",
      "Segoe UI Emoji";
    text-rendering: optimizeLegibility;
  }
}

@layer components {
  /*
   * Editorial Prose Styling
   * Refined typography for premium readability
   */
  .duet-prose {
    font-family: var(--font-sans);
    font-size: 17px;
    line-height: 1.82;
    letter-spacing: -0.008em;
    color: var(--prose-text);
    text-wrap: pretty;
    font-feature-settings: "kern" 1, "liga" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Headings - Serif for editorial elegance */
  .duet-prose :where(h1, h2, h3, h4) {
    margin: 0;
    font-family: var(--font-serif);
    color: var(--prose-heading);
    text-wrap: balance;
    font-feature-settings: "kern" 1;
  }

  .duet-prose :where(h1) {
    font-size: 32px;
    font-weight: 600;
    letter-spacing: -0.025em;
    line-height: 1.2;
    margin-top: 2.5em;
  }

  .duet-prose :where(h2) {
    font-size: 24px;
    font-weight: 600;
    letter-spacing: -0.02em;
    line-height: 1.3;
    margin-top: 2.8em;
    padding-top: 1.2em;
    border-top: 1px solid var(--duet-border);
  }

  .duet-prose :where(h2:first-child) {
    border-top: none;
    padding-top: 0;
  }

  .duet-prose :where(h3) {
    font-size: 19px;
    font-weight: 600;
    letter-spacing: -0.015em;
    line-height: 1.4;
    margin-top: 2em;
  }

  .duet-prose :where(h4) {
    font-size: 16px;
    font-weight: 600;
    letter-spacing: -0.01em;
    line-height: 1.5;
    margin-top: 1.8em;
  }

  /* Paragraphs - Refined spacing */
  .duet-prose :where(p) {
    margin: 1.4em 0 0;
  }

  .duet-prose :where(h1, h2, h3, h4) + :where(p) {
    margin-top: 0.8em;
  }

  /* Drop cap for first paragraph - editorial signature */
  .duet-prose--dropcap > p:first-of-type::first-letter {
    float: left;
    font-family: var(--font-serif);
    font-size: 4em;
    font-weight: 500;
    line-height: 0.8;
    padding-right: 0.12em;
    padding-top: 0.08em;
    color: var(--prose-heading);
  }

  /* Lists - Clean and elegant */
  .duet-prose :where(ul, ol) {
    margin: 1.4em 0 0;
    padding-left: 1.5rem;
  }

  .duet-prose :where(ul) {
    list-style: none;
  }

  .duet-prose :where(ul li) {
    position: relative;
    padding-left: 0.4em;
  }

  .duet-prose :where(ul li)::before {
    content: "";
    position: absolute;
    left: -1.1em;
    top: 0.7em;
    width: 5px;
    height: 5px;
    background: var(--duet-muted);
    border-radius: 50%;
    opacity: 0.5;
  }

  .duet-prose :where(ol) {
    list-style: decimal;
  }

  .duet-prose :where(ol li)::marker {
    color: var(--duet-muted);
    font-weight: 500;
    font-feature-settings: "tnum" 1;
  }

  .duet-prose :where(li) {
    margin-top: 0.6em;
  }

  .duet-prose :where(li p) {
    margin-top: 0.4em;
  }

  /* Links - Subtle underline that strengthens on hover */
  .duet-prose :where(a) {
    color: var(--prose-link);
    text-decoration: underline;
    text-decoration-color: color-mix(in srgb, var(--prose-link) 40%, transparent);
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
    transition:
      color 200ms ease,
      text-decoration-color 200ms ease;
  }

  .duet-prose :where(a:hover) {
    color: var(--prose-link-hover);
    text-decoration-color: var(--prose-link-hover);
  }

  /* Strong - Slightly heavier */
  .duet-prose :where(strong) {
    color: var(--prose-heading);
    font-weight: 600;
  }

  /* Horizontal rule - Editorial divider */
  .duet-prose :where(hr) {
    border: 0;
    margin: 3em auto;
    width: 100%;
    height: 1px;
    background: var(--duet-border-editorial);
  }

  /* Ornamental divider variant */
  .duet-prose :where(hr.ornament),
  .duet-prose :where(hr:only-of-type) {
    width: 80px;
    height: auto;
    background: none;
    border: 0;
    text-align: center;
  }

  .duet-prose :where(hr.ornament)::after,
  .duet-prose :where(hr:only-of-type)::after {
    content: "* * *";
    display: block;
    font-family: var(--font-serif);
    font-size: 14px;
    letter-spacing: 0.5em;
    color: var(--duet-muted);
    opacity: 0.6;
  }

  /* Inline code - Refined */
  .duet-prose :where(code) {
    font-family: ui-monospace, "SF Mono", SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.9em;
    padding: 0.15em 0.45em;
    border-radius: 5px;
    border: 1px solid var(--code-border);
    background: var(--code-bg);
    color: var(--code-text);
    font-feature-settings: "liga" 0;
  }

  /* Code blocks - Clean and functional */
  .duet-prose :where(pre) {
    overflow-x: auto;
    margin: 2em 0;
    padding: 20px 24px;
    border-radius: 10px;
    border: 1px solid var(--code-border);
    background: var(--pre-bg);
    color: var(--code-text);
    font-size: 14px;
    line-height: 1.7;
  }

  .duet-prose :where(pre code) {
    display: block;
    padding: 0;
    border: 0;
    border-radius: 0;
    background: transparent;
    color: inherit;
    font-size: inherit;
  }

  /* Blockquotes - Editorial pull quote style */
  .duet-prose :where(blockquote) {
    position: relative;
    margin: 2.5em 0;
    padding: 0 0 0 28px;
    border-left: 3px solid var(--divider-ornament);
  }

  .duet-prose :where(blockquote p) {
    font-family: var(--font-serif);
    font-size: 19px;
    font-style: italic;
    line-height: 1.65;
    color: var(--prose-heading);
    margin: 0;
  }

  .duet-prose :where(blockquote p + p) {
    margin-top: 1em;
  }

  .duet-prose :where(blockquote cite),
  .duet-prose :where(blockquote footer) {
    display: block;
    margin-top: 1em;
    font-family: var(--font-sans);
    font-size: 14px;
    font-style: normal;
    color: var(--prose-text-secondary);
    letter-spacing: 0.02em;
  }

  .duet-prose :where(blockquote cite)::before {
    content: "â€” ";
  }

  /* Tables - Refined with better spacing */
  .duet-prose :where(table) {
    width: 100%;
    margin: 2em 0;
    border-collapse: collapse;
    font-size: 15px;
    font-feature-settings: "tnum" 1;
  }

  .duet-prose :where(th) {
    text-align: left;
    font-weight: 600;
    font-size: 12px;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--prose-text-secondary);
    padding: 12px 16px;
    border-bottom: 2px solid var(--duet-border-editorial);
  }

  .duet-prose :where(td) {
    padding: 14px 16px;
    border-bottom: 1px solid var(--duet-border);
    vertical-align: top;
  }

  .duet-prose :where(tr:last-child td) {
    border-bottom: none;
  }

  .duet-prose :where(tbody tr:hover td) {
    background: color-mix(in srgb, var(--duet-border) 50%, transparent);
  }

  /* Emphasis */
  .duet-prose :where(em) {
    font-style: italic;
  }

  /* Images in prose - Full bleed with captions */
  .duet-prose :where(img) {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 2.5em 0;
    border-radius: 8px;
  }

  .duet-prose :where(figure) {
    margin: 2.5em 0;
  }

  .duet-prose :where(figure img) {
    margin: 0;
  }

  .duet-prose :where(figcaption) {
    margin-top: 12px;
    font-size: 14px;
    line-height: 1.5;
    color: var(--prose-text-secondary);
    text-align: center;
    font-style: italic;
  }

  /* Small text - Refined for footnotes, asides */
  .duet-prose :where(small) {
    font-size: 14px;
    color: var(--prose-text-secondary);
  }

  /* Abbreviations */
  .duet-prose :where(abbr) {
    text-decoration: underline dotted;
    text-underline-offset: 3px;
    cursor: help;
  }

  /* Lead paragraph - For article intros */
  .duet-prose :where(.lead),
  .duet-prose:not(.duet-prose--dropcap) > p:first-of-type {
    font-size: 19px;
    line-height: 1.7;
    color: var(--prose-text);
  }
}